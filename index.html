<!--
Vault‑Tec Records v2 — Terminal UI (drop‑in)
Files in this doc:
1) index.html (landing + router)
2) /assets/styles.css (CRT aesthetic, responsive)
3) /assets/app.js (routing, keyboard, storage)
4) /content/stories.json (content schema)
5) robots.txt
6) sitemap.xml
7) feed.xml (RSS)

Copy each section into matching files on your site. If you already have a working index, you can keep your URL and just pull pieces (SEO, keyboard map, router). All JS uses vanilla ES modules; no build step needed.
-->

<!-- ========================= 1) index.html ========================= -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Vault‑Tec Records — Terminal Access</title>
  <meta name="description" content="Classified logs, holotapes, and wasteland field notes. Fallout‑inspired short stories and serials." />
  <link rel="icon" href="/assets/vaultboy.svg" type="image/svg+xml" />
  <!-- Open Graph / Twitter -->
  <meta property="og:title" content="Vault‑Tec Records — Terminal Access" />
  <meta property="og:description" content="Classified logs, holotapes, and wasteland field notes." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://vaulttecrecords.com/" />
  <meta property="og:image" content="https://vaulttecrecords.com/assets/cover.jpg" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="theme-color" content="#0aff9d" />
  <!-- SEO extras -->
  <link rel="alternate" type="application/rss+xml" title="Vault‑Tec Records RSS" href="/feed.xml" />
  <link rel="preload" href="/assets/styles.css" as="style" />
  <link rel="stylesheet" href="/assets/styles.css" />
  <script type="module" src="/assets/app.js" defer></script>
  <!-- Boot sequence styles are in styles.css; markup lives just before   <audio id="bootchime" preload="auto">
    <source src="/assets/boot.mp3" type="audio/mpeg" />
  </audio>
</body> -->
</head>
<body>
  <!-- ===== Boot Overlay (shows once; can be forced via #/boot) ===== -->
  <div id="boot" class="boot hidden" aria-live="polite" aria-label="Terminal boot sequence">
    <div class="boot-inner">
      <pre id="boot-logos" class="boot-logos" aria-hidden="true"></pre>
      <div id="boot-lines" class="boot-lines" role="status"></div>
      <div class="boot-progress"><i></i></div>
      <button id="boot-skip" class="btn boot-skip" aria-label="Skip boot (Esc)">Skip ▷</button>
    </div>
  </div>
  <div class="scanlines" aria-hidden="true"></div>
  <header class="shell">
    <div class="brand">
      <span class="pipdot" aria-hidden="true">●</span>
      <h1>VAULT‑TEC RECORDS</h1>
      <span class="sub">TERMINAL ACCESS</span>
    </div>
    <nav class="topnav">
      <button id="toggle-fx" class="btn" aria-pressed="false" title="Toggle CRT flicker">FX</button>
      <button id="toggle-sfx" class="btn" aria-pressed="false" title="Toggle key beeps">SFX</button>
      <a class="btn" href="/feed.xml" target="_blank" rel="noopener">RSS</a>
    </nav>
  </header>

  <main id="app" class="shell">
    <!-- Router mount -->
    <section id="list-view" class="panel hidden" aria-live="polite"></section>
    <section id="story-view" class="panel hidden" aria-live="polite"></section>
  </main>

  <footer class="shell foot">
    <div class="status" id="status">READY▌</div>
    <div class="help">
      <strong>INPUT:</strong> ↑/↓ navigate • ↵ open • 1–9 quick select • / search • b back • m menu
    </div>
  </footer>

  <audio id="beep" preload="auto">
    <source src="/assets/beep.mp3" type="audio/mpeg" />
  </audio>
</body>
</html>


/* ====================== 2) /assets/styles.css ====================== */
:root{
  --fg:#0aff9d; --bg:#02170e; --dim:#0a5c44; --link:#8dffd7; --accent:#e2ffe4; --scan:rgba(255,255,255,.04)
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0; background:var(--bg); color:var(--fg); font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.shell{max-width:980px; margin:0 auto; padding:16px}
.brand{display:flex; align-items:baseline; gap:12px}
.brand h1{margin:0; font-size:clamp(18px,2.8vw,28px); letter-spacing:.12em}
.sub{opacity:.7; font-size:.9em}
.pipdot{color:var(--accent)}
.topnav{display:flex; gap:8px; justify-content:flex-end}
.btn{border:1px solid var(--dim); background:transparent; color:var(--fg); padding:6px 10px; border-radius:10px; cursor:pointer}
.btn:focus{outline:2px dotted var(--link); outline-offset:2px}
.panel{border:1px solid var(--dim); border-radius:16px; padding:16px; box-shadow:0 0 0 1px var(--dim) inset}
.hidden{display:none}

/* terminal list cards */
.list{display:grid; grid-template-columns: repeat(auto-fill,minmax(240px,1fr)); gap:12px}
.card{border:1px solid var(--dim); padding:12px; border-radius:12px; position:relative}
.card h3{margin:.2em 0}
.card .meta{opacity:.7; font-size:.85em}
.card .tag{border:1px solid var(--dim); padding:2px 6px; border-radius:999px; font-size:.75em; margin-right:6px}
.card:focus-within{outline:2px dotted var(--link)}

/* story layout */
.story{display:grid; grid-template-columns: 260px 1fr; gap:16px}
.toc{border-right:1px dashed var(--dim); padding-right:12px; max-height:70vh; overflow:auto}
.toc a{display:block; padding:6px 8px; text-decoration:none; color:var(--fg)}
.toc a.active{background:rgba(255,255,255,.06)}
.chapter{line-height:1.7}
.chapter h2{margin-top:0}
.progress{height:6px; background:var(--dim); border-radius:999px; overflow:hidden; margin:8px 0 16px}
.progress > i{display:block; height:100%; width:0%; background:var(--fg)}
.foot{opacity:.8; font-size:.9em}
.status{font-weight:700}

/* CRT effect */
.scanlines::before{content:""; position:fixed; inset:0; pointer-events:none; background:linear-gradient(0deg, var(--scan) 1px, transparent 1px) repeat; background-size:100% 3px; mix-blend-mode:soft-light; opacity:.35}
@media (prefers-reduced-motion: reduce){ .scanlines{display:none} }

@media (max-width:860px){
  .story{grid-template-columns: 1fr}
  .toc{border-right:0; border-bottom:1px dashed var(--dim); padding-bottom:12px}
}

/* ===== Boot overlay ===== */
.boot{position:fixed; inset:0; background:var(--bg); color:var(--fg); z-index:9999; display:flex; align-items:center; justify-content:center;}
.boot-inner{width:min(920px,92vw); padding:16px; border:1px solid var(--dim); border-radius:16px; box-shadow:0 0 0 1px var(--dim) inset}
.boot-logos{margin:0 0 8px 0; color:var(--accent); line-height:1}
.boot-lines{min-height:160px; white-space:pre-wrap}
.boot-progress{height:8px; background:var(--dim); border-radius:999px; overflow:hidden; margin-top:10px}
.boot-progress > i{display:block; height:100%; width:0%; background:var(--fg)}
.boot-skip{margin-top:10px}

// ====================== 3) /assets/app.js (ESM) ======================
// Content-first SPA + Boot overlay
const el = (sel) => document.querySelector(sel);
const listView = el('#list-view');
const storyView = el('#story-view');
const statusEl = el('#status');
const beep = el('#beep');
const bootEl = el('#boot');
const bootLinesEl = el('#boot-lines');
const bootLogosEl = el('#boot-logos');
const bootSkipBtn = el('#boot-skip');
const bootChime = el('#bootchime');

const state = {
  stories: [],
  route: location.hash.replace(/^#\/?/, ''),
  fx: JSON.parse(localStorage.getItem('vtr.fx')||'true'),
  sfx: JSON.parse(localStorage.getItem('vtr.sfx')||'false'),
};

function setStatus(msg){ statusEl.textContent = msg + '▌'; }
function playBeep(){ if(state.sfx){ beep.currentTime = 0; beep.play().catch(()=>{});} }

async function fetchJSON(path){
  const res = await fetch(path, {cache:'reload'});
  if(!res.ok) throw new Error('Failed to load '+path);
  return res.json();
}

function routeTo(hash){
  state.route = hash.replace(/^#\/?/, '');
  location.hash = state.route ? ('#/'+state.route) : '#/';
  render();
}

function render(){
  const parts = state.route.split('/').filter(Boolean);
  if(parts.length === 0){ renderList(); return; }
  const [slug, idxStr] = parts;
  const story = state.stories.find(s => s.slug === slug);
  if(!story){ renderList(); return; }
  const idx = Math.max(0, Math.min((story.chapters.length-1), parseInt(idxStr||'0',10)));
  renderStory(story, idx);
}

function renderList(){
  listView.classList.remove('hidden');
  storyView.classList.add('hidden');
  listView.innerHTML = `
    <input id="search" class="btn" placeholder="/ search titles & tags" aria-label="Search" />
    <div class="list" id="list"></div>
  `;
  const grid = el('#list');
  const q = new URLSearchParams(location.search).get('q')?.toLowerCase() || '';
  const items = state.stories
    .filter(s => !q || s.title.toLowerCase().includes(q) || s.tags.join(' ').toLowerCase().includes(q))
    .map((s,i)=>`
      <article class="card">
        <a href="#/${s.slug}" class="stretched" data-idx="${i}" aria-label="Open ${s.title}"></a>
        <h3>${s.title}</h3>
        <div class="meta">${s.description}</div>
        <div class="meta">${s.chapters.length} chapters • ${s.words.toLocaleString()} words</div>
        <div class="meta">Updated ${new Date(s.updated).toLocaleDateString()}</div>
        <div>${s.tags.map(t=>`<span class="tag">${t}</span>`).join('')}</div>
      </article>
    `).join('');
  grid.innerHTML = items;
  setStatus('READY');
}

function renderStory(story, idx){
  listView.classList.add('hidden');
  storyView.classList.remove('hidden');
  const pct = Math.round(((idx+1)/story.chapters.length)*100);
  storyView.innerHTML = `
    <div class="story">
      <aside class="toc" role="navigation" aria-label="Chapters">
        <h3>${story.title}</h3>
        ${story.chapters.map((c,i)=>`<a href="#/${story.slug}/${i}" class="${i===idx?'active':''}">${i+1}. ${c.title}</a>`).join('')}
        <p class="meta">${story.description}</p>
      </aside>
      <article class="chapter">
        <div class="progress"><i style="width:${pct}%"></i></div>
        <h2>${idx+1}. ${story.chapters[idx].title}</h2>
        ${renderContent(story.chapters[idx].html)}
        <nav style="margin-top:16px; display:flex; gap:8px; flex-wrap:wrap">
          ${idx>0?`<a class="btn" href="#/${story.slug}/${idx-1}">◀ Prev</a>`:''}
          ${idx<story.chapters.length-1?`<a class="btn" href="#/${story.slug}/${idx+1}">Next ▶</a>`:''}
          <a class="btn" href="#/">Menu</a>
          <a class="btn" href="https://youtube.com/@VaultTecRecords" target="_blank" rel="noopener">YouTube</a>
        </nav>
      </article>
    </div>
  `;
  localStorage.setItem('vtr.'+story.slug+'.idx', String(idx));
  setStatus(`LOADED: ${story.title} — Chapter ${idx+1}`);
}

function renderContent(html){
  return `<div>${html}</div>`;
}

function attachGlobalKeys(){
  window.addEventListener('keydown', (e)=>{
    if(/^[1-9]$/.test(e.key) && !e.metaKey && !e.ctrlKey){
      const n = parseInt(e.key,10)-1;
      const card = document.querySelectorAll('.card a')[n];
      if(card){ e.preventDefault(); playBeep(); card.click(); }
    }
    if(e.key === 'Enter'){
      const first = document.querySelector('.card a');
      if(first && (!storyView || storyView.classList.contains('hidden'))){ first.click(); }
    }
    if(e.key === 'ArrowUp' || e.key === 'k'){ window.scrollBy({top:-80, behavior:'smooth'}); }
    if(e.key === 'ArrowDown' || e.key === 'j'){ window.scrollBy({top:80, behavior:'smooth'}); }
    if(e.key === 'b'){ routeTo(''); }
    if(e.key === '/'){ e.preventDefault(); const s = document.getElementById('search'); if(s){ s.focus(); s.select(); } }
    if(e.key === 'Escape'){ if(!bootEl.classList.contains('hidden')) endBoot(); }
  });
}

function wireToggles(){
  const fxBtn = document.getElementById('toggle-fx');
  const sfxBtn = document.getElementById('toggle-sfx');
  const scan = document.querySelector('.scanlines');
  const apply = ()=>{ scan.style.display = state.fx? 'block':'none'; fxBtn.setAttribute('aria-pressed', String(state.fx)); sfxBtn.setAttribute('aria-pressed', String(state.sfx)); };
  fxBtn.addEventListener('click', ()=>{ state.fx=!state.fx; localStorage.setItem('vtr.fx', JSON.stringify(state.fx)); apply(); });
  sfxBtn.addEventListener('click', ()=>{ state.sfx=!state.sfx; localStorage.setItem('vtr.sfx', JSON.stringify(state.sfx)); apply(); });
  apply();
}

// ==== Boot Sequence ==================================================
const BOOT_KEY = 'vtr.bootSeen';
const BOOT_DURATION_MS = 4200; // fallback max duration
const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

const BOOT_LOGO = String.raw`
   __     ___       _ _ _   _____            _                 _     
   \ \   / (_)_   _(_) | | | ____|_ __   ___| |__   ___   ___ | |__  
    \ \ / /| \ \ / / | | | |  _| | '_ \ / __| '_ \ / _ \ / _ \| '_ \ 
     \ V / | |\ V /| | | | | |___| | | | (__| | | | (_) | (_) | |_) |
      \_/  |_| \_/ |_|_|_| |_____|_| |_|\___|_| |_|\___/ \___/|_.__/ 
`;

const BOOT_LINES = [
  'Initializing Vault-Te c™ interface ... OK',
  'Mounting holotape archives ... OK',
  'Decrypting pre‑war records ... OK',
  'Scanning anomalies in Ohio sector ... FOUND',
  'Routing terminals ... OK',
  'Loading stories.json ... OK',
  'Granting user access ... OK'
];

function typeLine(target, text, speed=12){
  return new Promise(resolve=>{
    let i=0; const iv = setInterval(()=>{
      target.textContent += text[i++];
      if(i>=text.length){ clearInterval(iv); resolve(); }
    }, speed);
  });
}

async function runBoot(){
  if(!bootEl) return;
  bootEl.classList.remove('hidden');
  bootLogosEl.textContent = BOOT_LOGO;
  try{ bootChime && bootChime.play().catch(()=>{}); }catch{}
  for(let i=0;i<BOOT_LINES.length;i++){
    const line = document.createElement('div');
    bootLinesEl.appendChild(line);
    await typeLine(line, BOOT_LINES[i]);
    const pct = Math.round(((i+1)/BOOT_LINES.length)*100);
    el('.boot-progress > i').style.width = pct+'%';
    await new Promise(r=>setTimeout(r, 140));
  }
  await new Promise(r=>setTimeout(r, 300));
  endBoot();
}

function endBoot(){
  bootEl.classList.add('hidden');
  localStorage.setItem(BOOT_KEY, 'true');
}

function wireBoot(){
  if(!bootEl) return;
  bootSkipBtn.addEventListener('click', endBoot);
}

async function init(){
  setStatus('BOOTING');
  wireBoot();
  try{
    state.stories = await fetchJSON('/content/stories.json');
  }catch(err){ setStatus('ERROR: stories.json'); console.error(err); return; }
  window.addEventListener('hashchange', ()=>{ state.route = location.hash.replace(/^#\/?/, ''); render(); });
  attachGlobalKeys();
  wireToggles();

  const forceBoot = location.hash === '#/boot';
  const seen = localStorage.getItem(BOOT_KEY) === 'true';
  if(prefersReduced){
    // accessibility: skip animations for users opting out
    bootEl && bootEl.classList.add('hidden');
  } else if(forceBoot || !seen){
    await runBoot();
  }

  render();
}

init();


/* ========== 4) /content/stories.json — content schema & example ========
Place your real content here. You can keep HTML minimal; headings and <p> tags
are supported. If you prefer Markdown, pre-convert to HTML in your editor.
*/
[
  {
    "slug": "no-home-in-the-waste",
    "title": "No Home in the Waste",
    "description": "A lone courier, a broken holotape, and a vault that never opened.",
    "tags": ["serial", "ohio", "ghouls"],
    "updated": "2025-10-20T18:00:00Z",
    "words": 4820,
    "chapters": [
      {"title": "Boot Sequence", "html": "<p>Green lines bloom across the glass as the terminal coughs awake...</p>"},
      {"title": "Fault Line", "html": "<p>The earth keeps its own ledgers. Today it comes to collect.</p>"}
    ]
  },
  {
    "slug": "shelter-21-cafe",
    "title": "Shelter 21 Café",
    "description": "Coffee, secrets, and a jukebox that only plays pre‑war lies.",
    "tags": ["short", "bar", "houston"],
    "updated": "2025-10-05T03:00:00Z",
    "words": 1800,
    "chapters": [
      {"title": "Pull‑Out Shot", "html": "<p>Neon hum. Outside, the block is ash and rebar.</p>"}
    ]
  }
]


# =========================== 5) robots.txt ===========================
User-agent: *
Allow: /
Sitemap: https://vaulttecrecords.com/sitemap.xml


# ========================== 6) sitemap.xml ===========================
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  <url>
    <loc>https://vaulttecrecords.com/</loc>
    <changefreq>weekly</changefreq>
    <priority>1.0</priority>
  </url>
  <!-- add story canonical URLs below as you publish -->
  <url><loc>https://vaulttecrecords.com/#/no-home-in-the-waste</loc></url>
  <url><loc>https://vaulttecrecords.com/#/shelter-21-cafe</loc></url>
</urlset>


# =========================== 7) feed.xml =============================
<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0">
  <channel>
    <title>Vault‑Tec Records</title>
    <link>https://vaulttecrecords.com/</link>
    <description>Classified logs, holotapes, and wasteland field notes.</description>
    <language>en-us</language>
    <lastBuildDate>${new Date().toUTCString()}</lastBuildDate>
    <!-- Create one item per new chapter you publish -->
    <item>
      <title>No Home in the Waste — Chapter 1</title>
      <link>https://vaulttecrecords.com/#/no-home-in-the-waste/0</link>
      <guid>no-home-1</guid>
      <pubDate>Mon, 20 Oct 2025 18:00:00 GMT</pubDate>
      <description>Boot Sequence</description>
    </item>
  </channel>
</rss>
